<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Smit Shop</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;600;800&display=swap');
  *{box-sizing:border-box}
  body{
    margin:0; min-height:100vh; display:grid; place-items:center; text-align:center;
    font-family:'Poppins',sans-serif; color:#fff;
    background:linear-gradient(-45deg,#a18cd1,#fbc2eb,#fad0c4,#ffd1ff);
    background-size:400% 400%; animation:bg 10s ease infinite;
  }
  @keyframes bg{0%{background-position:0 50%}50%{background-position:100% 50%}100%{background-position:0 50%}}
  .wrap{background:rgba(255,255,255,.18);backdrop-filter:blur(14px);padding:28px 34px;border-radius:22px;box-shadow:0 12px 40px rgba(0,0,0,.18);animation:fade .8s ease}
  @keyframes fade{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
  h1{margin:0 0 8px; font-size:32px}
  .sub{opacity:.9;margin-bottom:18px}
  .btn{padding:10px 16px;border:none;border-radius:14px;background:linear-gradient(90deg,#ff758c,#ff7eb3);color:#fff;font-weight:700;cursor:pointer;transition:.2s}
  .btn:hover{transform:translateY(-1px);box-shadow:0 10px 22px rgba(255,126,179,.35)}
</style>
</head>
<body>
<div class="wrap">
  <h1>Welcome to Smit Shop</h1>
  <div class="sub">Hi <span id="uname">User</span> ðŸ‘‹ â€” you are logged in.</div>
  <button class="btn" id="logoutBtn">Logout</button>
</div>

<script>
  // Guard: if not logged in, kick to login
  (async ()=>{
    try{
      const r = await fetch('/api/session');
      const d = await r.json();
      if(!d.loggedIn) location.href='/index.html';
      else document.getElementById('uname').textContent = d.username || 'User';
    }catch{
      location.href='/index.html';
    }
  })();

  document.getElementById('logoutBtn').addEventListener('click', async ()=>{
    await fetch('/logout',{method:'POST'});
    location.href='/index.html';
  });
</script>
</body>
</html>
